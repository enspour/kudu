@let columns = this.columns() || [] | filter: filterByBoardFn : board();

<div
  class="columns"
  kuduDropContainer
  [kuduDropContainerTypes]="['column']"
  [kuduDropContainerData]="columns"
  (byDrop)="onDropColumn()"
>
  @for (column of columns; track column.uuid) {
    <lib-kanban-column
      [column]="column"
      kuduDrag
      kuduDragType="column"
      [kuduDragData]="column"
    >
      <button kudu-button class="task__creation" (click)="onTaskCreate()">
        <kudu-icon icon="plus" [iconSize]="16" />
        <div>Добавить задачу</div>
      </button>

      <div
        class="tasks"
        kuduDropContainer
        [kuduDropContainerTypes]="['task']"
        [kuduDropContainerData]="column"
        (byDrop)="onDropTask()"
      >
        @let tasks = this.tasks() || [] | filter: filterByColumnFn : column;

        @for (task of tasks; track task.uuid) {
          <lib-kanban-task
            [task]="task"
            (click)="onTaskClick(task)"
            kuduDrag
            kuduDragType="task"
            [kuduDragData]="task"
          />
        }
      </div>
    </lib-kanban-column>
  }
</div>

<lib-kanban-column-creation (byCreate)="onColumnCreate($event)" />
