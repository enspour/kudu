<table
  kudu-table
  kuduSort
  #sortRef="kuduSort"
  [(kuduSortConfig)]="sortConfig"
  [kuduSortFn]="sortFn"
>
  <thead>
    <tr>
      <th kudu-th></th>
      <th kudu-th [style.width.px]="52"></th>
      <th kudu-th kuduThSort="title">Название</th>
      <th kudu-th [style.width.%]="10">Исполнители</th>
      <th kudu-th kuduThSort="column" [style.width.px]="160">Статус</th>
      <th kudu-th kuduThSort="startDate" [style.width.%]="10">Начало</th>
      <th kudu-th kuduThSort="endDate" [style.width.%]="10">Завершение</th>
    </tr>
  </thead>

  <tbody>
    @let tasks = this.tasks() | kuduSort: sortRef.config();

    @for (task of tasks; track task.uuid) {
      <tr (click)="onTaskClick(task)">
        <td kudu-td></td>

        <td kudu-td>
          <kudu-icon class="icon" icon="circle-check" />
        </td>

        <td kudu-td>{{ task.title }}</td>

        <td kudu-td>
          <lib-employee-picker
            [value]="employees() | getEmployeesByUuid: task.executorUuids"
            [employees]="employees()"
            [multiple]="true"
            (byClose)="onTaskExecutorsChange(task, $event)"
            (click)="$event.stopPropagation()"
          />
        </td>

        <td kudu-td>
          <lib-task-status
            [task]="task"
            [style.max-width.px]="138"
            (click)="$event.stopPropagation()"
          />
        </td>

        <td kudu-td>{{ task.startDate | date: 'dd.MM.yyyy' }}</td>
        <td kudu-td>{{ task.endDate | date: 'dd.MM.yyyy' }}</td>
      </tr>
    }
  </tbody>
</table>
